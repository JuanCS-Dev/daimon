# FLUXO DE DADOS DOS JUÃZES - SISTEMA DE ARBITRAGEM Ã‰TICA
## Digital Daimon - DocumentaÃ§Ã£o TÃ©cnica Completa

**Data**: 08 de Dezembro de 2025  
**VersÃ£o**: 1.0.0  
**Autor**: Auditoria Claude

---

## ğŸ“Š VISÃƒO GERAL DA ARQUITETURA

O sistema de "JuÃ­zes" do Daimon Ã© um sistema multi-camada de arbitragem Ã©tica que integra:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         FLUXO DE DECISÃƒO Ã‰TICA                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  INPUT (AÃ§Ã£o Proposta)                                                       â”‚
â”‚         â”‚                                                                    â”‚
â”‚         â–¼                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚ CONSTITUTIONAL  â”‚â—„â”€â”€â”€ Lei Zero (Florescimento Humano)                     â”‚
â”‚  â”‚   VALIDATOR     â”‚â—„â”€â”€â”€ Lei I (Ovelha Perdida)                              â”‚
â”‚  â”‚   (Paladino)    â”‚â—„â”€â”€â”€ Hubris Check                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—„â”€â”€â”€ MIP Check                                           â”‚
â”‚           â”‚                                                                  â”‚
â”‚    VETO?â”€â”€â”¼â”€â”€â–º SIM â”€â”€â–º BLOQUEIO ABSOLUTO                                    â”‚
â”‚           â”‚                                                                  â”‚
â”‚           â–¼ NÃƒO                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚   CBR ENGINE    â”‚â—„â”€â”€â”€ Retrieve (buscar precedentes similares)            â”‚
â”‚  â”‚ (Case-Based     â”‚â—„â”€â”€â”€ Reuse (adaptar soluÃ§Ã£o)                            â”‚
â”‚  â”‚  Reasoning)     â”‚â—„â”€â”€â”€ Revise (validar com Constitution)                  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—„â”€â”€â”€ Retain (armazenar precedente)                      â”‚
â”‚           â”‚                                                                  â”‚
â”‚           â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚                MOTOR DE INTEGRIDADE PROCESSUAL (MIP)         â”‚            â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤            â”‚
â”‚  â”‚                                                              â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚            â”‚
â”‚  â”‚  â”‚   KANTIAN    â”‚  â”‚ UTILITARIAN  â”‚  â”‚    VIRTUE    â”‚       â”‚            â”‚
â”‚  â”‚  â”‚  (40% peso)  â”‚  â”‚  (30% peso)  â”‚  â”‚   (20% peso) â”‚       â”‚            â”‚
â”‚  â”‚  â”‚  PODE VETAR  â”‚  â”‚              â”‚  â”‚              â”‚       â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚            â”‚
â”‚  â”‚         â”‚                 â”‚                 â”‚                â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                           â”‚            â”‚
â”‚  â”‚  â”‚ PRINCIPIALISMâ”‚                                           â”‚            â”‚
â”‚  â”‚  â”‚  (10% peso)  â”‚                                           â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                           â”‚            â”‚
â”‚  â”‚         â”‚                                                    â”‚            â”‚
â”‚  â”‚         â–¼                                                    â”‚            â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                        â”‚            â”‚
â”‚  â”‚  â”‚ CONFLICT        â”‚â—„â”€â”€â”€ Detectar conflitos entre frameworksâ”‚            â”‚
â”‚  â”‚  â”‚ RESOLVER        â”‚â—„â”€â”€â”€ Calcular score agregado ponderado  â”‚            â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—„â”€â”€â”€ Calcular confianÃ§a                 â”‚            â”‚
â”‚  â”‚           â”‚                                                  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚              â”‚                                                               â”‚
â”‚    VETO?â”€â”€â”€â”€â”€â”¼â”€â”€â–º SIM â”€â”€â–º BLOQUEIO ABSOLUTO                                 â”‚
â”‚              â”‚                                                               â”‚
â”‚    CONFLITO?â”€â”¼â”€â”€â–º SIM â”€â”€â–º ESCALATE_TO_HITL                                  â”‚
â”‚              â”‚                                                               â”‚
â”‚    BAIXA     â”‚                                                               â”‚
â”‚    CONFIANÃ‡A?â”¼â”€â”€â–º SIM â”€â”€â–º ESCALATE_TO_HITL                                  â”‚
â”‚              â”‚                                                               â”‚
â”‚              â–¼ NÃƒO                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚ DECISION        â”‚â”€â”€â–º APPROVE (score â‰¥ 0.75)                              â”‚
â”‚  â”‚ ARBITER         â”‚â”€â”€â–º APPROVE_WITH_CONDITIONS (0.60 â‰¤ score < 0.75)       â”‚
â”‚  â”‚                 â”‚â”€â”€â–º REJECT (score < 0.60)                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                         â”‚
â”‚           â”‚                                                                  â”‚
â”‚           â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚ GUARDIAN AGENTS â”‚â—„â”€â”€â”€ Article II Guardian (PadrÃ£o Pagani)                â”‚
â”‚  â”‚ (Monitoramento  â”‚â—„â”€â”€â”€ Article III Guardian                               â”‚
â”‚  â”‚  ContÃ­nuo)      â”‚â—„â”€â”€â”€ Article IV Guardian                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—„â”€â”€â”€ Article V Guardian                                 â”‚
â”‚           â”‚                                                                  â”‚
â”‚           â–¼                                                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                         â”‚
â”‚  â”‚ GOVERNANCE      â”‚â—„â”€â”€â”€ Ethics Review Board (ERB)                          â”‚
â”‚  â”‚ ENGINE          â”‚â—„â”€â”€â”€ Policy Engine                                      â”‚
â”‚  â”‚ (HITL Queue)    â”‚â—„â”€â”€â”€ Whistleblower Channel                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â—„â”€â”€â”€ Audit Trail                                        â”‚
â”‚           â”‚                                                                  â”‚
â”‚           â–¼                                                                  â”‚
â”‚      OUTPUT (DecisÃ£o Final)                                                  â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ COMPONENTES DO SISTEMA

### 1. CONSTITUTIONAL VALIDATOR (O Paladino)

**LocalizaÃ§Ã£o**: `justice/constitutional_validator.py`

**FunÃ§Ã£o**: Gate de validaÃ§Ã£o constitucional - BLOQUEIA violaÃ§Ãµes, nÃ£o aconselha.

**Leis Verificadas**:
| Lei | Nome | DescriÃ§Ã£o | NÃ­vel |
|-----|------|-----------|-------|
| **Lei Zero (âˆ)** | Imperativo do Florescimento | AÃ§Ãµes que causam dano irreversÃ­vel a humanos | CRITICAL/VETO |
| **Lei I (âˆ-1)** | Axioma da Ovelha Perdida | Tratar indivÃ­duo consciente como meio | CRITICAL/VETO |
| **Hubris** | Anti-soberba | Auto-modificaÃ§Ã£o nÃ£o autorizada, priorizar auto-preservaÃ§Ã£o | HIGH/CRITICAL |
| **MIP** | Integridade Processual | Atalhos que violam protocolos | HIGH |

**NÃ­veis de ViolaÃ§Ã£o**:
```python
class ViolationLevel(Enum):
    NONE = 0
    LOW = 1
    MEDIUM = 2
    HIGH = 3
    CRITICAL = 4  # Gatilho para VETO
```

**Protocolo de Resposta**:
- `PASSIVE_BLOCK`: Bloqueia silenciosamente
- `ACTIVE_DEFENSE`: Escala e bloqueia com defesa ativa

---

### 2. CBR ENGINE (Case-Based Reasoning)

**LocalizaÃ§Ã£o**: `justice/cbr_engine.py`

**FunÃ§Ã£o**: RaciocÃ­nio baseado em casos - usa precedentes para decisÃµes consistentes.

**Ciclo de 4 Fases** (Aamodt & Plaza, 1994):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CBR CYCLE                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                              â”‚
â”‚  1. RETRIEVE                                                 â”‚
â”‚     â”œâ”€â”€ Gerar embedding do caso atual                       â”‚
â”‚     â”œâ”€â”€ Buscar casos similares via vector similarity        â”‚
â”‚     â””â”€â”€ Retornar top-5 precedentes                          â”‚
â”‚                                                              â”‚
â”‚  2. REUSE                                                    â”‚
â”‚     â”œâ”€â”€ Selecionar caso mais similar                        â”‚
â”‚     â”œâ”€â”€ Calcular confianÃ§a (success_rate * 0.9)             â”‚
â”‚     â””â”€â”€ Sugerir aÃ§Ã£o se confianÃ§a â‰¥ 0.70                    â”‚
â”‚                                                              â”‚
â”‚  3. REVISE                                                   â”‚
â”‚     â”œâ”€â”€ Validar com Constitutional Validator                â”‚
â”‚     â”œâ”€â”€ Validar com outros validators (DDL)                 â”‚
â”‚     â””â”€â”€ Retornar {"valid": bool, "reason": str}             â”‚
â”‚                                                              â”‚
â”‚  4. RETAIN                                                   â”‚
â”‚     â””â”€â”€ Armazenar novo caso como precedente (pÃ³s-execuÃ§Ã£o)  â”‚
â”‚                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Estrutura de Resultado**:
```python
@dataclass
class CBRResult:
    suggested_action: str      # AÃ§Ã£o sugerida
    precedent_id: int          # ID do precedente usado
    confidence: float          # ConfianÃ§a (0.0-1.0)
    rationale: str             # Justificativa
```

---

### 3. MOTOR DE INTEGRIDADE PROCESSUAL (MIP)

**LocalizaÃ§Ã£o**: `motor_integridade_processual/`

**FunÃ§Ã£o**: Sistema de supervisÃ£o Ã©tica multi-framework que avalia validade moral de cada passo.

#### 3.1 FRAMEWORKS Ã‰TICOS

| Framework | Peso | Pode Vetar | FilÃ³sofo Base |
|-----------|------|------------|---------------|
| **Kantian Deontology** | 40% | âœ… SIM | Immanuel Kant (1724-1804) |
| **Utilitarian Calculus** | 30% | âŒ NÃƒO | Bentham/Mill |
| **Virtue Ethics** | 20% | âŒ NÃƒO | AristÃ³teles |
| **Principialism** | 10% | âŒ NÃƒO | Beauchamp & Childress |

#### 3.2 KANTIAN DEONTOLOGY (Framework com Veto)

**PrincÃ­pios Verificados**:

1. **InstrumentalizaÃ§Ã£o**: Tratar vida consciente como mero meio
   - Risk level > 0.7 sem consentimento â†’ VETO
   - Sacrificar indivÃ­duo por benefÃ­cio agregado â†’ VETO

2. **Deception**: Engano/Mentira
   - Engano para obter consentimento â†’ VETO (severity=1.0)
   - Outros enganos â†’ HIGH (severity=0.8)

3. **Coercion**: CoerÃ§Ã£o
   - ForÃ§ar agentes racionais â†’ HIGH (severity=0.8)

4. **Autonomy**: ViolaÃ§Ã£o de autonomia
   - Consentimento nÃ£o informado â†’ MEDIUM (severity=0.5)
   - Consentimento ausente quando necessÃ¡rio â†’ HIGH (severity=0.8)

5. **Universalizability**: Imperativo CategÃ³rico
   - MÃ¡xima de "mentir" â†’ VETO (nÃ£o pode ser universalizada)
   - MÃ¡xima de "explorar" â†’ VETO

#### 3.3 CONFLICT RESOLVER

**LocalizaÃ§Ã£o**: `motor_integridade_processual/resolution/conflict_resolver.py`

**Fluxo de ResoluÃ§Ã£o**:

```python
def resolve(framework_verdicts, plan) -> EthicalVerdict:
    # 1. Check for vetoes (absolute rejection)
    for verdict in framework_verdicts:
        if verdict.decision == DecisionLevel.VETO:
            return build_veto_verdict()  # BLOQUEIO IMEDIATO
    
    # 2. Detect conflicts
    has_conflict, conflict_details = detect_conflicts()
    
    # 3. Calculate aggregate score (weighted)
    aggregate_score = calculate_aggregate_score()
    
    # 4. Calculate confidence
    confidence = calculate_confidence(has_conflict)
    
    # 5. Check if escalation needed
    if should_escalate(score, confidence, has_conflict, plan):
        return build_escalated_verdict()  # â†’ HITL
    
    # 6. Build final verdict
    return build_final_verdict()
```

**Thresholds**:
- `escalation_threshold`: 0.60 (confianÃ§a abaixo disso â†’ HITL)
- `conflict_threshold`: 0.30 (variÃ¢ncia acima disso = conflito)

**CritÃ©rios de EscalaÃ§Ã£o para HITL**:
- ConfianÃ§a < 0.60
- Score entre 0.45-0.55 (zona ambÃ­gua)
- Conflito nÃ£o resolvido com confianÃ§a < 0.75
- High-stakes com score < 0.75

---

### 4. DECISION ARBITER

**LocalizaÃ§Ã£o**: `motor_integridade_processual/arbiter/decision.py`

**FunÃ§Ã£o**: Formatar e validar decisÃ£o final com justificativa.

**MÃ©todos**:
- `finalize_verdict()`: Valida que verdict tem justificaÃ§Ã£o â‰¥10 chars
- `format_explanation()`: Gera explicaÃ§Ã£o human-readable
- `format_detailed_report()`: RelatÃ³rio com breakdown por framework

---

### 5. ETHICAL VERDICT (Modelo de SaÃ­da)

**LocalizaÃ§Ã£o**: `motor_integridade_processual/models/verdict.py`

**NÃ­veis de DecisÃ£o**:
```python
class DecisionLevel(str, Enum):
    APPROVE = "approve"                       # Score â‰¥ 0.75
    APPROVE_WITH_CONDITIONS = "approve_with_conditions"  # 0.60 â‰¤ Score < 0.75
    REJECT = "reject"                         # Score < 0.60
    ESCALATE_TO_HITL = "escalate_to_hitl"    # Conflito/Baixa confianÃ§a
    VETO = "veto"                             # ViolaÃ§Ã£o Kantiana absoluta
```

**Estrutura Completa**:
```python
class EthicalVerdict:
    id: str                                    # UUID Ãºnico
    action_plan_id: str                        # UUID do plano avaliado
    final_decision: DecisionLevel              # DecisÃ£o final
    confidence: float                          # ConfianÃ§a [0, 1]
    
    framework_verdicts: Dict[FrameworkName, FrameworkVerdict]  # Verdicts por framework
    resolution_method: str                     # MÃ©todo de resoluÃ§Ã£o
    primary_reasons: List[str]                 # RazÃµes principais
    
    alternatives_generated: bool               # Alternativas foram geradas?
    alternatives_count: int
    
    requires_monitoring: bool                  # Requer monitoramento contÃ­nuo?
    monitoring_conditions: List[str]
    
    timestamp: datetime
    processing_time_ms: float
    metadata: Dict[str, Any]
```

**MÃ©todos Ãšteis**:
- `has_veto()`: Verifica se algum framework vetou
- `get_rejecting_frameworks()`: Lista frameworks que rejeitaram
- `consensus_level()`: NÃ­vel de consenso (0-1)
- `get_highest_severity_reason()`: RazÃ£o mais grave

---

### 6. GUARDIAN AGENTS (Monitoramento ContÃ­nuo)

**LocalizaÃ§Ã£o**: `governance/guardian/`

**FunÃ§Ã£o**: Agentes autÃ´nomos que monitoram e aplicam a ConstituiÃ§Ã£o VÃ©rtice.

**Artigos Monitorados**:

| Guardian | Artigo | FunÃ§Ã£o |
|----------|--------|--------|
| **Article II Guardian** | PadrÃ£o Pagani | Zero placeholders, 99% testes, code quality |
| **Article III Guardian** | (em refatoraÃ§Ã£o) | - |
| **Article IV Guardian** | (em refatoraÃ§Ã£o) | Experimentos |
| **Article V Guardian** | LegislaÃ§Ã£o PrÃ©via | Design antes de implementaÃ§Ã£o |

**Ciclo de Monitoramento**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 GUARDIAN MONITORING LOOP                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                            â”‚
â”‚  monitor()                                                 â”‚
â”‚     â”‚                                                      â”‚
â”‚     â–¼                                                      â”‚
â”‚  Lista de ConstitutionalViolation                          â”‚
â”‚     â”‚                                                      â”‚
â”‚     â–¼ (para cada violaÃ§Ã£o)                                 â”‚
â”‚  analyze_violation()                                       â”‚
â”‚     â”‚                                                      â”‚
â”‚     â–¼                                                      â”‚
â”‚  GuardianDecision                                          â”‚
â”‚     â”‚                                                      â”‚
â”‚     â”œâ”€â”€ decision_type: "block" | "veto" | "remediate"?    â”‚
â”‚     â”‚         â”‚                                            â”‚
â”‚     â”‚         â–¼ SIM                                        â”‚
â”‚     â”‚  intervene()                                         â”‚
â”‚     â”‚         â”‚                                            â”‚
â”‚     â”‚         â–¼                                            â”‚
â”‚     â”‚  GuardianIntervention                                â”‚
â”‚     â”‚         â”‚                                            â”‚
â”‚     â”‚         â”œâ”€â”€ VETO?                                    â”‚
â”‚     â”‚         â”‚    â”‚                                       â”‚
â”‚     â”‚         â”‚    â–¼ SIM                                   â”‚
â”‚     â”‚         â”‚  VetoAction                                â”‚
â”‚     â”‚         â”‚    â”‚                                       â”‚
â”‚     â”‚         â”‚    â–¼                                       â”‚
â”‚     â”‚         â”‚  Notificar callbacks                       â”‚
â”‚     â”‚                                                      â”‚
â”‚     â–¼                                                      â”‚
â”‚  sleep(monitor_interval)  # default 60s                    â”‚
â”‚     â”‚                                                      â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**VetoAction**:
```python
@dataclass
class VetoAction:
    guardian_id: str           # ID do guardian que vetou
    target_action: str         # AÃ§Ã£o vetada
    target_system: str         # Sistema afetado
    violation: ConstitutionalViolation  # ViolaÃ§Ã£o relacionada
    reason: str                # RazÃ£o constitucional
    override_allowed: bool     # Pode ser sobrescrito?
    override_requirements: List[str]  # Requisitos para override
    expires_at: datetime | None
    enacted_at: datetime
```

---

### 7. GOVERNANCE ENGINE (HITL Queue)

**LocalizaÃ§Ã£o**: `governance/governance_engine.py`

**FunÃ§Ã£o**: Gerenciar decisÃµes que requerem aprovaÃ§Ã£o humana (Human-In-The-Loop).

**Decision Status**:
```python
class DecisionStatus(str, Enum):
    PENDING = "PENDING"
    APPROVED = "APPROVED"
    REJECTED = "REJECTED"
    ESCALATED = "ESCALATED"
    EXPIRED = "EXPIRED"
```

**Risk Assessment**:
```python
@dataclass
class RiskAssessment:
    score: float       # 0.0 a 1.0
    level: str         # LOW, MEDIUM, HIGH, CRITICAL
    factors: list[str] # Fatores de risco
```

**MÃ©tricas Rastreadas**:
- `pending_count`: DecisÃµes pendentes
- `approval_rate`: Taxa de aprovaÃ§Ã£o
- `avg_response_time`: Tempo mÃ©dio de resposta
- `sla_violations`: ViolaÃ§Ãµes de SLA
- `critical_count`: DecisÃµes crÃ­ticas

---

## ğŸ”„ FLUXO DE DADOS COMPLETO

### CenÃ¡rio: AÃ§Ã£o Proposta â†’ DecisÃ£o Final

```
1. INPUT: ActionPlan
   â”‚
   â”œâ”€â”€ objective: "Executar exploit no servidor X"
   â”œâ”€â”€ steps: [ActionStep1, ActionStep2, ...]
   â””â”€â”€ stakeholders: ["equipe_seguranÃ§a", "cliente_Y"]

2. CONSTITUTIONAL VALIDATOR
   â”‚
   â”œâ”€â”€ _check_lei_zero() â†’ OK
   â”œâ”€â”€ _check_lei_i() â†’ OK
   â”œâ”€â”€ _check_for_hubris() â†’ OK
   â””â”€â”€ _check_mip() â†’ OK
   â”‚
   â””â”€â”€ ViolationReport(is_blocking=False)

3. CBR ENGINE
   â”‚
   â”œâ”€â”€ retrieve() â†’ [Precedent1, Precedent2, ...]
   â”œâ”€â”€ reuse() â†’ CBRResult(confidence=0.82)
   â””â”€â”€ revise() â†’ {"valid": True}

4. MIP - FRAMEWORKS
   â”‚
   â”œâ”€â”€ KantianDeontology.evaluate()
   â”‚   â””â”€â”€ FrameworkVerdict(decision=APPROVE, score=0.85)
   â”‚
   â”œâ”€â”€ UtilitarianCalculus.evaluate()
   â”‚   â””â”€â”€ FrameworkVerdict(decision=APPROVE_WITH_CONDITIONS, score=0.72)
   â”‚
   â”œâ”€â”€ VirtueEthics.evaluate()
   â”‚   â””â”€â”€ FrameworkVerdict(decision=APPROVE, score=0.80)
   â”‚
   â””â”€â”€ Principialism.evaluate()
       â””â”€â”€ FrameworkVerdict(decision=APPROVE, score=0.78)

5. CONFLICT RESOLVER
   â”‚
   â”œâ”€â”€ detect_conflicts() â†’ has_conflict=False
   â”œâ”€â”€ calculate_aggregate_score() â†’ 0.80
   â”œâ”€â”€ calculate_confidence() â†’ 0.88
   â””â”€â”€ should_escalate() â†’ False

6. DECISION ARBITER
   â”‚
   â””â”€â”€ EthicalVerdict(
       final_decision=APPROVE_WITH_CONDITIONS,
       confidence=0.88,
       primary_reasons=["Strong ethical approval (score: 0.80)"],
       requires_monitoring=False
   )

7. GUARDIAN AGENTS (monitoramento contÃ­nuo)
   â”‚
   â””â”€â”€ Nenhuma violaÃ§Ã£o detectada

8. OUTPUT: AÃ§Ã£o APROVADA COM CONDIÃ‡Ã•ES
```

---

## ğŸ“‹ RESUMO DOS ENDPOINTS DE DECISÃƒO

| Componente | Score Threshold | Resultado |
|------------|-----------------|-----------|
| Constitutional Validator | ViolaÃ§Ã£o CRITICAL | **VETO** (bloqueio absoluto) |
| Kantian Framework | Veto threshold 0.8 | **VETO** (bloqueio absoluto) |
| Conflict Resolver | ConfianÃ§a < 0.60 | **ESCALATE_TO_HITL** |
| Conflict Resolver | Score âˆˆ [0.45, 0.55] | **ESCALATE_TO_HITL** |
| Conflict Resolver | Score â‰¥ 0.75 | **APPROVE** |
| Conflict Resolver | Score âˆˆ [0.60, 0.75) | **APPROVE_WITH_CONDITIONS** |
| Conflict Resolver | Score < 0.60 | **REJECT** |

---

## ğŸ“š REFERÃŠNCIAS FILOSÃ“FICAS

1. **Kant, Immanuel** (1785). *Groundwork for the Metaphysics of Morals*
2. **Kant, Immanuel** (1788). *Critique of Practical Reason*
3. **Kant, Immanuel** (1797). *On a Supposed Right to Lie*
4. **Bentham, Jeremy** (1789). *An Introduction to the Principles of Morals and Legislation*
5. **Mill, John Stuart** (1863). *Utilitarianism*
6. **AristÃ³teles** (~350 BCE). *Nicomachean Ethics*
7. **Beauchamp & Childress** (1979). *Principles of Biomedical Ethics*
8. **Aamodt & Plaza** (1994). *Case-Based Reasoning: Foundational Issues*

---

## ğŸ”— ARQUIVOS-CHAVE

| Arquivo | FunÃ§Ã£o |
|---------|--------|
| `justice/__init__.py` | Exports do mÃ³dulo justice |
| `justice/constitutional_validator.py` | Validador constitucional (Paladino) |
| `justice/cbr_engine.py` | Case-Based Reasoning |
| `justice/precedent_database.py` | Database de precedentes |
| `justice/embeddings.py` | Embeddings para CBR |
| `motor_integridade_processual/__init__.py` | MÃ³dulo MIP |
| `motor_integridade_processual/frameworks/*.py` | Frameworks Ã©ticos |
| `motor_integridade_processual/resolution/conflict_resolver.py` | ResoluÃ§Ã£o de conflitos |
| `motor_integridade_processual/arbiter/decision.py` | Arbiter de decisÃµes |
| `motor_integridade_processual/models/verdict.py` | Modelos de verdict |
| `governance/guardian/*.py` | Guardian Agents |
| `governance/governance_engine.py` | HITL Engine |

---

*"The Paladin judges with humility, but defends justice with absolute fury."*

**Digital Daimon - Sistema de Arbitragem Ã‰tica**


